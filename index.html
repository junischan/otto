
    z-index: 1100;
    box-shadow: var(--shadow-glow);
    transition: var(--transition);
  }

  .cart-float:hover {
    transform: translateY(-2px) scale(1.1);
  }

  .cart-count {
    position: absolute;
    top: -6px;
    right: -6px;
    width: 22px;
    height: 22px;
    border-radius: 999px;
    background: #ff3b30;
    color: #fff;
    display: grid;
    place-items: center;
    font-size: 11px;
    font-weight: 900;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.35);
    animation: pulse 1.6s infinite;
  }

  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  /* ==================== BOTTOM NAV MEJORADO ==================== */
  .bottom-nav {
    position: fixed;
    bottom: 16px;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 32px);
    max-width: 400px;
    height: 64px;
    z-index: 200;
    background: rgba(20, 26, 42, 0.95);
    border: 1px solid var(--bd-light);
    border-radius: var(--radius-lg);
    backdrop-filter: blur(20px);
    display: flex;
    justify-content: space-around;
    align-items: center;
    box-shadow: var(--shadow-hover);
    transition: var(--transition);
  }

  .bottom-nav a {
    flex: 1;
    text-align: center;
    text-decoration: none;
    color: var(--muted);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    font-size: 20px;
    padding: 8px;
    border-radius: var(--radius-sm);
    transition: var(--transition);
  }

  .bottom-nav a.active {
    color: var(--acc);
    background: rgba(37, 211, 102, 0.1);
  }

  /* ==================== LIGHTBOX PREMIUM ==================== */
  .lightbox {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.95);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s, visibility 0.3s;
    backdrop-filter: blur(10px);
  }

  .lightbox.active {
    visibility: visible;
    opacity: 1;
  }

  .lightbox-content {
    max-width: min(1000px, 92vw);
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    padding: 20px;
  }

  .lightbox img {
    max-width: 100%;
    max-height: 70vh;
    object-fit: contain;
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
  }

  .lightbox-close {
    position: absolute;
    top: 20px;
    right: 20px;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    font-size: 28px;
    width: 44px;
    height: 44px;
    border-radius: 999px;
    cursor: pointer;
    transition: var(--transition);
  }

  .lightbox-close:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg);
  }

  .lightbox-info {
    background: rgba(20, 26, 42, 0.95);
    border: 1px solid var(--bd);
    padding: 16px;
    border-radius: 12px;
    text-align: center;
    backdrop-filter: blur(10px);
    max-width: 600px;
    width: 100%;
  }

  /* ==================== RESPONSIVE ==================== */
  @media (max-width: 600px) {
    .masonry {
      column-count: 2;
    }
    
    .search-wrap {
      max-width: 200px;
    }
    
    .controls {
      flex-direction: column;
      align-items: center;
    }
    
    .chip {
      width: 100%;
      max-width: 300px;
      justify-content: space-between;
    }
  }

  /* Animaciones y estados */
  .pin {
    animation: fadeInUp 0.6s ease forwards;
    opacity: 0;
    transform: translateY(30px);
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
</head>
<body>

  <!-- Header Premium con B√∫squeda -->
  <header class="appbar" id="header">
    <div class="row">
      <a href="#" class="brand">
        <span class="dot"></span> 
        <span>Pacto Repuestos</span>
      </a>
      
      <div class="search-wrap">
        <svg class="search-ico" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 14 15.5l.27.28v.79L20 21.49 21.49 20l-5.99-5.99zM6.5 11A4.5 4.5 0 1 1 11 15.5 4.5 4.5 0 0 1 6.5 11z"></path>
        </svg>
        <input id="searchInput" class="search-input" type="text" placeholder="Buscar repuestos..." />
        <!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="description" content="Cat√°logo Premium de Repuestos - Dise√±o Pacto con funcionalidad Otto">
<title>Pacto Repuestos - Cat√°logo Premium</title>
<style>
  :root{
    /* Paleta Pacto mejorada + funcionalidad Otto */
    --bg: #0a0e17;
    --bg-gradient: linear-gradient(135deg, #0a0e17 0%, #0f1526 100%);
    --panel: #0f1526;
    --panel-hover: #1a2136;
    --card: #141a2a;
    --card-hover: #1c2338;
    --bd: #273247;
    --bd-light: #354461;
    --txt: #e6e8ee;
    --txt-secondary: #c5cad6;
    --muted: #8892a8;
    --muted-light: #a0aac0;
    --acc: #25d366; /* Verde WhatsApp de Otto */
    --acc-hover: #37ee92;
    --acc-glow: rgba(37, 211, 102, 0.25);
    --error: #ff4757;
    --success: #2ed573;
    --warning: #ffa502;
    
    --radius: 18px;
    --radius-sm: 12px;
    --radius-lg: 24px;
    --gap: 6px;
    --shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
    --shadow-hover: 0 20px 40px rgba(0, 0, 0, 0.5);
    --shadow-glow: 0 8px 32px var(--acc-glow);
    
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-fast: all 0.15s ease;
  }

  * { box-sizing: border-box; }
  
  html, body {
    margin: 0;
    padding: 0;
    background: var(--bg);
    background-image: var(--bg-gradient);
    background-attachment: fixed;
    color: var(--txt);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Inter', sans-serif;
    line-height: 1.6;
    scroll-behavior: smooth;
  }

  /* ==================== HEADER MEJORADO ==================== */
  .appbar {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(15, 21, 38, 0.95);
    border-bottom: 1px solid var(--bd);
    backdrop-filter: saturate(1.2) blur(20px);
    transition: var(--transition);
  }

  .appbar.scrolled {
    background: rgba(15, 21, 38, 0.98);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }

  .row {
    max-width: 1200px;
    margin: 0 auto;
    padding: 12px 16px;
    display: flex;
    gap: 16px;
    align-items: center;
  }

  .brand {
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 800;
    font-size: 18px;
    letter-spacing: -0.02em;
    text-decoration: none;
    color: var(--txt);
    transition: var(--transition-fast);
  }

  .brand:hover {
    transform: translateY(-1px);
  }

  .brand .dot {
    width: 28px;
    height: 28px;
    border-radius: 10px;
    background: linear-gradient(135deg, var(--acc) 0%, var(--acc-hover) 100%);
    box-shadow: 0 0 0 4px var(--acc-glow), var(--shadow-glow);
    position: relative;
    overflow: hidden;
  }

  /* ==================== B√öSQUEDA PREMIUM ==================== */
  .search-wrap {
    position: relative;
    flex: 1;
    max-width: 400px;
    margin-left: auto;
  }

  .search-input {
    width: 100%;
    padding: 12px 44px 12px 40px;
    border-radius: 999px;
    border: 1px solid var(--bd);
    background: rgba(20, 26, 42, 0.6);
    color: var(--txt);
    font-size: 14px;
    outline: none;
    transition: var(--transition);
    backdrop-filter: blur(10px);
  }

  .search-input:focus {
    border-color: var(--acc);
    box-shadow: 0 0 0 4px var(--acc-glow);
    background: rgba(20, 26, 42, 0.8);
  }

  .search-ico {
    position: absolute;
    left: 14px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0.6;
  }

  .search-clear {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--muted);
    font-size: 18px;
    display: none;
    cursor: pointer;
    padding: 6px;
    border-radius: 999px;
  }

  /* ==================== CATEGOR√çAS INTELIGENTES ==================== */
  .hero {
    border-bottom: 1px solid var(--bd);
    background: 
      radial-gradient(800px 300px at 20% -20%, rgba(37, 211, 102, 0.08), transparent 60%),
      radial-gradient(600px 250px at 80% -30%, rgba(37, 211, 102, 0.06), transparent 60%);
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: top;
  }

  .hero.hidden {
    transform: translateY(-100%);
    opacity: 0;
    pointer-events: none;
  }

  .hero .wrap {
    max-width: 1200px;
    margin: 0 auto;
    padding: 24px 16px;
    position: relative;
    z-index: 2;
  }

  .controls {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 8px;
  }

  .chip {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    border-radius: 999px;
    background: var(--card);
    border: 1px solid var(--bd);
    box-shadow: var(--shadow);
    font-size: 12px;
  }

  .control-select {
    appearance: none;
    border: none;
    background: transparent;
    color: var(--txt);
    font-weight: 600;
    cursor: pointer;
    padding-right: 20px;
  }

  .stats {
    text-align: center;
    font-size: 13px;
    color: var(--muted);
    margin-top: 8px;
  }

  /* ==================== MASONRY PREMIUM ==================== */
  .wrap {
    max-width: 1200px;
    margin: 0 auto;
    padding: 16px;
  }

  .masonry {
    column-count: 2;
    column-gap: var(--gap);
    column-fill: balance;
  }

  @media (min-width: 600px) { 
    .masonry { column-count: 3; }
  }
  @media (min-width: 900px) { 
    .masonry { column-count: 4; }
  }
  @media (min-width: 1200px) { 
    .masonry { column-count: 5; }
  }

  /* ==================== CARDS PREMIUM CON FUNCIONALIDAD ==================== */
  .pin {
    display: inline-block;
    width: 100%;
    margin: 0 0 6px;
    break-inside: avoid;
    border-radius: var(--radius-sm);
    overflow: hidden;
    background: var(--card);
    border: 1px solid var(--bd);
    box-shadow: var(--shadow);
    transition: var(--transition);
    position: relative;
    cursor: pointer;
  }

  .pin:hover {
    transform: translateY(-6px) scale(1.02);
    box-shadow: var(--shadow-hover);
    border-color: var(--bd-light);
    background: var(--card-hover);
  }

  .thumb {
    position: relative;
    overflow: hidden;
    height: 180px;
  }

  .thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: var(--transition);
  }

  .pin:hover .thumb img {
    transform: scale(1.05);
  }

  .badge {
    position: absolute;
    top: 8px;
    left: 8px;
    background: linear-gradient(135deg, var(--acc) 0%, var(--acc-hover) 100%);
    color: #000;
    font-weight: 800;
    font-size: 9px;
    padding: 4px 8px;
    border-radius: 999px;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    box-shadow: var(--shadow-glow);
    z-index: 10;
    backdrop-filter: blur(10px);
  }

  /* ==================== BOTONES DE ACCI√ìN ==================== */
  .card-actions {
    display: flex;
    gap: 8px;
    padding: 0 12px 12px;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    opacity: 0;
    transform: translateY(10px);
    transition: var(--transition);
  }

  .pin:hover .card-actions {
    opacity: 1;
    transform: translateY(0);
  }

  .btn {
    flex: 1;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    border: none;
    border-radius: 10px;
    padding: 10px 12px;
    cursor: pointer;
    font-weight: 700;
    font-size: 12px;
    transition: var(--transition);
    text-decoration: none;
  }

  .btn-whatsapp {
    background: var(--acc);
    color: #05150c;
    box-shadow: 0 8px 18px rgba(37, 211, 102, 0.35);
  }

  .btn-whatsapp:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 22px rgba(37, 211, 102, 0.45);
  }

  .btn-share {
    background: rgba(255, 255, 255, 0.1);
    color: var(--txt);
    border: 1px solid var(--bd);
  }

  .btn-share:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  .meta {
    padding: 12px;
    position: relative;
    z-index: 2;
  }

  .meta .title {
    margin: 0 0 2px;
    font-size: 14px;
    font-weight: 700;
    color: var(--txt);
    line-height: 1.2;
  }

  .meta .sub {
    margin: 0;
    color: var(--muted-light);
    font-size: 12px;
    font-weight: 500;
  }

  .precio {
    font-weight: 900;
    color: var(--acc);
    margin: 8px 12px 0;
    font-size: 14px;
  }

  /* ==================== CARRITO FLOTANTE PREMIUM ==================== */
  .cart-float {
    position: fixed;
    right: 22px;
    bottom: 80px;
    width: 60px;
    height: 60px;
    border-radius: 999px;
    background: linear-gradient(135deg, var(--acc) 0%, var(--acc-hover) 100%);
    color: #062313;
    font-size: 24px;
    display: grid;
    place-items: center;
    border: none;
    cursor: pointer;<button id="searchClear" class="search-clear">‚úï</button>
      </div>
    </div>
  </header>

  <!-- Secci√≥n de Controles Inteligentes -->
  <section class="hero" id="categories-section">
    <div class="wrap">
      <div class="controls">
        <div class="chip">
          <label for="category-select">Categor√≠a</label>
          <select id="category-select" class="control-select"></select>
        </div>
        <div class="chip">
          <label for="sort-select">Ordenar</label>
          <select id="sort-select" class="control-select">
            <option value="none">Sin orden</option>
            <option value="price-low">Precio: Bajo a Alto</option>
            <option value="price-high">Precio: Alto a Bajo</option>
            <option value="recent">M√°s Recientes</option>
          </select>
        </div>
      </div>
      <div class="stats"><span id="itemCount">0</span> productos encontrados</div>
    </div>
  </section>

  <!-- Cat√°logo Masonry Premium -->
  <main class="wrap">
    <div id="loading">Cargando cat√°logo premium...</div>
    <section id="masonry" class="masonry" role="region" aria-live="polite"></section>
    <div id="noResults" style="display:none">No se encontraron productos</div>
  </main>

  <!-- Carrito Flotante -->
  <button class="cart-float" id="cartFloat" aria-label="Ver carrito">
    üõí<span id="cartCount" class="cart-count">0</span>
  </button>

  <!-- Navegaci√≥n Inferior -->
  <nav class="bottom-nav">
    <a class="active" href="#" aria-label="Inicio">üè†<span>Inicio</span></a>
    <a href="#" aria-label="Buscar">üîç<span>Buscar</span></a>
    <a href="#" aria-label="Categor√≠as">üì¶<span>Categor√≠as</span></a>
    <a href="#" aria-label="Favoritos">‚ù§Ô∏è<span>Favoritos</span></a>
    <a href="#" aria-label="Perfil">üë§<span>Perfil</span></a>
  </nav>

  <!-- Lightbox Premium -->
  <div id="lightbox" class="lightbox" role="dialog" aria-label="Vista ampliada del producto">
    <div class="lightbox-content">
      <button class="lightbox-close" aria-label="Cerrar">&times;</button>
      <img src="" alt="Imagen ampliada" />
      <div class="lightbox-info">
        <div class="codigo"></div>
        <div class="desc"></div>
        <div class="precio"></div>
      </div>
    </div>
  </div>

<script>
// ===== CONFIGURACI√ìN =====
const WHATSAPP_NUMBER = '595986803963';
const DATA_JSON_URL = 'data.json?v=5';
const IMG_BASE = './';

// ===== ELEMENTOS DEL DOM =====
const elements = {
    masonry: document.getElementById("masonry"),
    categorySelect: document.getElementById("category-select"),
    sortSelect: document.getElementById("sort-select"),
    lightbox: document.getElementById("lightbox"),
    searchInput: document.getElementById("searchInput"),
    searchClear: document.getElementById("searchClear"),
    itemCount: document.getElementById("itemCount"),
    loading: document.getElementById("loading"),
    noResults: document.getElementById("noResults"),
    cartFloat: document.getElementById("cartFloat"),
    cartCount: document.getElementById("cartCount")
};

// ===== ESTADO GLOBAL =====
let ITEMS = [];
let filteredItems = [];
let cart = JSON.parse(localStorage.getItem('pactocart') || '[]');
let currentQuery = '';

// ===== FUNCIONES DE UTILIDAD =====
const formatPrice = (n) => new Intl.NumberFormat('es-PY').format(n||0) + " Gs";
const debounce = (f,w)=>{ let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>f(...a),w); }; };

// ===== HEADER INTELIGENTE (de versi√≥n vieja) =====
let lastScrollY = 0;
const categoriesSection = document.getElementById('categories-section');
const header = document.getElementById('header');

window.addEventListener('scroll', () => {
    const currentScrollY = window.scrollY;
    
    if (currentScrollY > 50) {
        header.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
    }

    if (currentScrollY > 100) {
        if (currentScrollY > lastScrollY) {
            categoriesSection.classList.add('hidden');
        } else {
            categoriesSection.classList.remove('hidden');
        }
    } else {
        categoriesSection.classList.remove('hidden');
    }

    lastScrollY = currentScrollY;
});

// ===== SISTEMA DE B√öSQUEDA Y FILTROS (de versi√≥n nueva) =====
async function loadData(){
    elements.loading.style.display = 'block';
    try{
        const r = await fetch(DATA_JSON_URL, { cache: 'no-store' });
        ITEMS = await r.json();
        localStorage.setItem('pactoData', JSON.stringify(ITEMS));
    }catch(e){
        const cached = localStorage.getItem('pactoData');
        ITEMS = cached ? JSON.parse(cached) : [];
    }
    initializeCatalog();
}

function initializeCatalog(){
    elements.loading.style.display = 'none';
    renderCategoryOptions();
    wireControls();

    window.SEARCH_INDEX = ITEMS.map(p=>({
        ...p,
        _codigo: String(p.codigo||'').toLowerCase(),
        _descripcion: String(p.descripcion||'').toLowerCase()
    }));

    applyFilters();
    updateCartCount();
    wireLightbox();
}

function renderCategoryOptions(){
    const cats = ['Todos', ...new Set(ITEMS.map(p=>p.categoria||'General')).values()];
    elements.categorySelect.innerHTML = cats.map(c=>`<option value="${c}">${c}</option>`).join('');
}

function wireControls(){
    elements.searchInput.addEventListener('input', debounce(e=>{
        currentQuery = e.target.value.toLowerCase().trim();
        elements.searchClear.style.display = currentQuery ? 'block' : 'none';
        applyFilters();
    }, 220));
    
    elements.searchClear.addEventListener('click', ()=>{
        elements.searchInput.value=''; currentQuery=''; 
        elements.searchClear.style.display='none'; applyFilters();
    });
    
    elements.categorySelect.addEventListener('change', applyFilters);
    elements.sortSelect.addEventListener('change', applyFilters);
}

function applyFilters(){
    const currentCategory = elements.categorySelect.value || 'Todos';
    const currentSort = elements.sortSelect.value || 'none';
    const q = currentQuery;

    let items = (currentCategory==='Todos') ? [...window.SEARCH_INDEX] : 
                window.SEARCH_INDEX.filter(p=>(p.categoria||'General')===currentCategory);
    
    if(q){ 
        items = items.filter(p=>p._codigo.includes(q)||p._descripcion.includes(q)); 
    }

    if(currentSort!=='none'){
        if(currentSort==='price-low') items.sort((a,b)=>(a.precio||0)-(b.precio||0));
        if(currentSort==='price-high') items.sort((a,b)=>(b.precio||0)-(a.precio||0));
    }

    filteredItems = items;
    renderItems();
}

// ===== RENDERIZADO MASONRY PREMIUM =====

function renderItems(){
    if(!filteredItems.length){
        elements.masonry.innerHTML = '';
        elements.masonry.style.display='none';
        elements.noResults.style.display='block';
        elements.itemCount.textContent='0';
        return;
    }
    
    elements.masonry.style.display='block';
    elements.noResults.style.display='none';
    elements.itemCount.textContent = filteredItems.length;

    elements.masonry.innerHTML = filteredItems.map((p, index)=>`
        <article class="pin" style="animation-delay: ${index * 0.1}s" 
                 data-fullimage="${p.imagen}" data-codigo="${p.codigo}" 
                 data-desc="${p.descripcion}" data-precio="${p.precio||0}">
            <div class="thumb">
                <img src="${p.imagen}" alt="${p.descripcion}" loading="lazy" 
                     onerror="this.src='https://via.placeholder.com/300x200/333/fff?text=Imagen+No+Disponible'">
                <span class="badge">${p.categoria || 'Nuevo'}</span>
            </div>
            <div class="meta">
                <p class="title">${p.codigo}</p>
                <p class="sub">${p.descripcion}</p>
            </div>
            <div class="precio">${formatPrice(p.precio||0)}</div>
            <div class="card-actions">
                <button class="btn btn-whatsapp" onclick="sendWhatsApp('${p.codigo}','${p.descripcion}',${p.precio||0})">
                    üí¨ WhatsApp
                </button>
                <button class="btn btn-share" onclick="addToCart(this.closest('.pin'))">
                    üõí Carrito
                </button>
            </div>
        </article>
    `).join('');

    // Eventos para lightbox
    document.querySelectorAll(".pin").forEach(card=>{
        card.querySelector('img').addEventListener('click', e=>{
            e.stopPropagation(); 
            openLightbox(card); 
        });
    });
}

// ===== LIGHTBOX PREMIUM =====
function wireLightbox(){
    elements.lightbox.addEventListener('click', e=>{
        if(e.target===elements.lightbox || e.target.classList.contains('lightbox-close')) 
            closeLightbox();
    });
    window.addEventListener('keydown', e=>{ if(e.key==='Escape') closeLightbox(); });
}

function openLightbox(card){
    const url = card.dataset.fullimage;
    const cod = card.dataset.codigo;
    const desc = card.dataset.desc;
    const pr = card.dataset.precio;
    
    elements.lightbox.querySelector('img').src = url;
    elements.lightbox.querySelector('.codigo').textContent = cod;
    elements.lightbox.querySelector('.desc').textContent = desc;
    elements.lightbox.querySelector('.precio').textContent = formatPrice(parseInt(pr));
    
    elements.lightbox.classList.add('active');
    document.body.style.overflow='hidden';
}

function closeLightbox(){
    elements.lightbox.classList.remove('active');
    document.body.style.overflow='';
}

// ===== CARRITO Y WHATSAPP =====
function addToCart(card){
    const item = {
        codigo: card.dataset.codigo,
        descripcion: card.dataset.desc,
        precio: parseInt(card.dataset.precio),
        imagen: card.dataset.fullimage,
        cantidad: 1
    };
    
    const existing = cart.find(c=>c.codigo===item.codigo);
    existing ? existing.cantidad++ : cart.push(item);
    
    localStorage.setItem('pactocart', JSON.stringify(cart));
    updateCartCount();
    showToast('‚úÖ Agregado al carrito');
}

function updateCartCount(){
    elements.cartCount.textContent = cart.length;
    elements.cartCount.style.display = cart.length ? 'grid' : 'none';
}

function showToast(message){
    const toast = document.createElement('div');
    toast.style.cssText = `
        position:fixed; top:20px; right:20px; background:var(--acc); color:#000; 
        padding:12px 20px; border-radius:8px; font-weight:800; z-index:10000;
        animation: toastIn 0.3s, toastOut 0.3s 2s forwards;
    `;
    toast.textContent = message;
    document.body.appendChild(toast);
    setTimeout(()=> toast.remove(), 2300);
}

function sendWhatsApp(codigo, descripcion, precio){
    const msg = `¬°Hola! Me interesa este repuesto:\n\nüìã C√≥digo: ${codigo}\nüìù Descripci√≥n: ${descripcion}\nüí∞ Precio: ${formatPrice(precio)}\n\n¬øEst√° disponible?`;
    window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`,'_blank');
}

// ===== INICIALIZACI√ìN =====
document.addEventListener('DOMContentLoaded', ()=>{
    loadData();
    wireLightbox();
    
    // Bottom nav activation
    document.querySelectorAll('.bottom-nav a').forEach(link=>{
        link.addEventListener('click', (e)=>{
            e.preventDefault();
            document.querySelectorAll('.bottom-nav a').forEach(l=>l.classList.remove('active'));
            link.classList.add('active');
        });
    });
});
</script>

</body>
</html>
