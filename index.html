<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Otto Repuestos</title>
<style>
  body {
    margin: 0;
    background: #0b0f19;
    color: #e6e8ee;
    font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif;
  }
  h1 {
    padding: 16px;
    text-align: center;
    font-size: 2em;
    margin-bottom: 20px;
  }
  .grid {
    column-count: 2;
    column-gap: 15px;
    padding: 15px;
  }
  .card {
    background: #141a2a;
    border-radius: 10px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, .3);
    overflow: hidden;
    margin-bottom: 15px;
    display: inline-block;
    width: 100%;
    break-inside: avoid;
    cursor: pointer; /* Agrega un cursor de mano para indicar que es clicable */
  }
  .card img {
    width: 100%;
    height: auto;
    object-fit: cover;
    display: block;
    background: #0f1529;
  }
  .info {
    padding: 10px;
    font-size: 13px;
  }
  .info .codigo {
    font-weight: 700;
    font-size: 14px;
  }
  .info .desc {
    color: #a7b0c3;
    font-size: 11px;
    margin-top: 5px;
    margin-bottom: 10px;
  }
  .info .precio {
    font-weight: 700;
    color: #25d366;
    font-size: 15px;
  }
  @media (min-width: 600px) {
    .grid {
      column-count: 3;
    }
  }
  @media (min-width: 900px) {
    .grid {
      column-count: 4;
    }
  }

  /* --- Estilos para el Lightbox (popup) --- */
  .lightbox {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s, visibility 0.3s;
  }
  .lightbox.active {
    visibility: visible;
    opacity: 1;
  }
  .lightbox img {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
    background: transparent;
  }
</style>
</head>
<body>
  <h1>Catálogo Otto Repuestos</h1>
  <div class="grid" id="grid"></div>

  <div id="lightbox" class="lightbox">
    <img src="" alt="Imagen ampliada">
  </div>

<script>
const money = n => new Intl.NumberFormat('es-PY').format(n) + " Gs";
const gridElement = document.getElementById("grid");
const lightbox = document.getElementById("lightbox");
const lightboxImage = lightbox.querySelector("img");

// La clave: Usamos 'fetch' para cargar el archivo data.json
fetch('data.json')
  .then(response => {
    if (!response.ok) {
      throw new Error('No se pudo cargar el archivo data.json');
    }
    return response.json();
  })
  .then(ITEMS => {
    gridElement.innerHTML = ITEMS.map(p => `
      <div class="card" data-fullimage="${p.imagen}">
        <img src="${p.imagen}" alt="${p.descripcion}">
        <div class="info">
          <div class="codigo">${p.codigo}</div>
          <div class="desc">${p.descripcion}</div>
          <div class="precio">${money(p.precio)}</div>
        </div>
      </div>
    `).join('');

    // --- Lógica para el clic ---
    const cards = document.querySelectorAll(".card");
    cards.forEach(card => {
      card.addEventListener("click", () => {
        const fullImageUrl = card.getAttribute("data-fullimage");
        lightboxImage.src = fullImageUrl;
        lightbox.classList.add("active");
      });
    });

  })
  .catch(error => {
    console.error('Error al cargar el catálogo:', error);
    gridElement.innerHTML = '<p style="text-align:center;">Hubo un error al cargar los productos. Por favor, inténtelo de nuevo más tarde.</p>';
  });

// --- Lógica para cerrar el Lightbox al hacer clic fuera de la imagen ---
lightbox.addEventListener("click", e => {
  if (e.target !== lightboxImage) {
    lightbox.classList.remove("active");
  }
});

</script>
</body>
</html>
